<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:sf="http://www.springframework.org/tags/faces">	

<ui:composition template="/WEB-INF/layouts/defaultLayout.xhtml">

<ui:define name="title">Account Details</ui:define>

<ui:define name="content">

<h:form id="detailsForm">

<ul class="controlLinks">
	<li>
		<sf:commandLink value="#{resourceBundle['navigate.ModifySearch']}" action="changeSearch"/>
	</li>
	<li>
		<sf:commandLink value="#{resourceBundle['navigate.SearchResults']}" action="searchResults"/>
	</li>
</ul>

<div id="entityDetails">

	<div id="accountDetails">
		<ul>
			<li>
				#{resourceBundle['label.Account']}: #{account.number}
				(<sf:commandLink value="#{resourceBundle['navigate.Edit']}" action="edit"/>)
			</li>
			<li>#{resourceBundle['label.Name']}: #{account.name}</li>
			<li>
				#{resourceBundle['label.Date']}: 
				<h:outputText value="#{account.dateOfBirth.date}">
					<f:convertDateTime type="date" dateStyle="medium"/>
				</h:outputText>
			</li>
			<li>#{resourceBundle['label.Email']}: #{account.email}</li>
			<li>
				#{resourceBundle['label.ReceiveNewsletter']}:
				<h:outputText value="#{resourceBundle['label.false']}" rendered="#{account.receiveNewsletter == 'false'}"/>
				<h:outputText value="#{resourceBundle['label.true']}" rendered="#{account.receiveNewsletter == 'true'}"/>
			</li>
			<li>
				#{resourceBundle['label.ReceiveMonthlyEmailUpdate']}: 
				<h:outputText value="#{resourceBundle['label.false']}" rendered="#{account.receiveMonthlyEmailUpdate == 'false'}"/>
				<h:outputText value="#{resourceBundle['label.true']}" rendered="#{account.receiveMonthlyEmailUpdate == 'true'}"/>
			</li>
		</ul>
	</div>

	<div id="beneficiaries">
		<h5>#{resourceBundle['label.Beneficiaries']}</h5>
		<h:outputText id="noBeneficiariesText" value="#{resourceBundle['label.noBeneficiaries']}" rendered="#{empty account.beneficiaries}"/>
		<h:dataTable id="beneficiaries" styleClass="summary" value="#{account.beneficiariesAsList}" var="b" rendered="#{not empty account.beneficiaries}">
			<h:column>
				<f:facet name="header">#{resourceBundle['label.Name']}</f:facet>
				#{b.name}
			</h:column>
			<h:column>
				<f:facet name="header">#{resourceBundle['label.AllocationPercentage']}</f:facet>
				#{b.allocationPercentage}
			</h:column>
			<h:column>
				<f:facet name="header">#{resourceBundle['label.Savings']}</f:facet>
				#{b.savings}
			</h:column>
		</h:dataTable>
	</div>

</div>

<script type="text/javascript">
	dojo.query('#beneficiaries > h5').forEach(function(titleElement){
		Spring.addDecoration(new Spring.ElementDecoration({
			elementId : titleElement.parentNode.id,
			widgetType : 'dijit.TitlePane',
			widgetAttrs : { title : titleElement.innerHTML, open : true }}));
	}).style('display','none');
</script>

</h:form>

</ui:define>

</ui:composition>

</html>